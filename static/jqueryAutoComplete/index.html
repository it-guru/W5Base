<html>
<head>
<script src="js/jquery.js"></script>
<script src="js/config.js"></script>
<script src="js/jquery-ui.min.js"></script>
 <link rel="stylesheet" href="js/jquery-ui.min.css">
</head>
<style>
body{
   margin:0;padding:0;overflow:hidden;
}
#apphead{
   margin:0;padding:0;
}
</style>
<script>
$(document).ready(function(){
   var checkStore=new Array();
   function checkValidValue(v){
      var isValid=false;
      for (i in checkStore){
         if (checkStore[i].name.toLowerCase()==v.toLowerCase()){
             isValid=true;
         }
      }
      if (v!="" && isValid){
         $("#save").removeAttr("disabled");
      }
      else{
         $("#save").attr("disabled", true);
      }
   }
   $("#useurl").html(document.autocompleteURL);
   $("#appname").autocomplete({
      source: function(request,response) {
           $.ajax({
               url: document.autocompleteURL,
               dataType: "jsonp",
               data: {
                   callback : "p",
                   search_name: "*"+request.term+"*",
                   search_cistatusid: "3 4",
                   FormatAs: "JSONP",
                   UseLimit: "20",
                   CurrentView: "(name,id)"
               },
               success: function( data ) {
                   checkStore=data;
                   response( $.map( data, function( item ) {
                       return {
                           label: item.name,
                           value: item.name
                       }
                   }));
               }
           });
      },
      change: function( event, ui ) {
         if (ui.item){
            checkValidValue(ui.item.value); 
         }
      },
      select: function( event, ui ) {
         if (ui.item){
            checkValidValue(ui.item.value); 
         }
      },
      minLength: 1
   }).keyup(function() {
      checkValidValue(this.value);
   })
   $("#save").click(function (e){
      alert("you use '"+$("#appname").val()+"'");
   });
});
</script>
<body><div id=apphead>
<h1 align=center>jquery AutoComplete on W5Base JSONP REST Data</h1>
</div>
<center>
<div style="width:550px;height:100px;padding:10px;
            text-align:left;border:1px solid black">
<table width=100%>
<tr><td>AutoComplete from:</td><td><div style="font-size:12px" id=useurl>???</div></td></tr>
<tr><td>Application:</td><td><input id=appname></td></tr>
</table>
<br>
<div style="text-align:center">
<input id=save type=button disabled style="width:80%" value="save">
</div>


</div>

</center></body>
</html>
